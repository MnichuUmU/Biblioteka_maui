<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:controls="clr-namespace:Biblioteka_v1.Views"
             x:Class="Biblioteka_v1.Views.Books"
             Title="Książki">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
    <StackLayout Grid.Row="0" Grid.Column="0">
        
        <controls:CustomHeader />
            <Border Stroke="Purple" StrokeThickness="2" Margin="5,10">

                <StackLayout Margin="10,5">
                    <Entry x:Name="ent_search" Placeholder="Autor"/>
                    <Button x:Name="btn_search" Clicked="btn_search_Clicked"  BackgroundColor="Purple" Padding="0, 0, 0, 0" Text="Szukaj"/>

                </StackLayout>
            </Border>
            <StackLayout x:Name="FormBooks" >
                <Border Stroke="Purple" StrokeThickness="2" Margin="5,10" Padding="10, 5">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <Label Text="Książki" Grid.Row="0" HorizontalOptions="Center" TextColor="Purple" FontSize="32"/>
                <ListView x:Name="LView" HasUnevenRows="True" Grid.Row="1" ItemTapped="LView_ItemTapped">
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <ViewCell>
                                <VerticalStackLayout>
                                    <Label Text="{Binding Tytle}"/>
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="auto"/>
                                            <RowDefinition Height="auto"/>
                                        </Grid.RowDefinitions>
                                        <Label Grid.Row="0" Text="{Binding Author}"/>
                                    </Grid>
                                </VerticalStackLayout>
                            </ViewCell>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </Grid>
                </Border>
        </StackLayout>
    </StackLayout>

        <BoxView x:Name="BackgroundBlocker"
             Grid.Row="0" Grid.Column="0"
             BackgroundColor="Black"
             Opacity="0.5" 
             IsVisible="False">
        <BoxView.GestureRecognizers>
            <TapGestureRecognizer Tapped="OnBlockerTapped" />
        </BoxView.GestureRecognizers>
    </BoxView>

        <controls:BookPopUp x:Name="popUp" Grid.Row="0" Grid.Column="0" IsVisible="False" />

    </Grid>
</ContentPage>